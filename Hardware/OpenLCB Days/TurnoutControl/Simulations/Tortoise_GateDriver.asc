Version 4
SHEET 1 2824 2148
WIRE -3152 -800 -3328 -800
WIRE -3088 -800 -3152 -800
WIRE -2384 -800 -3024 -800
WIRE -3328 -752 -3328 -800
WIRE -3328 -752 -3456 -752
WIRE -3152 -704 -3152 -800
WIRE -3088 -704 -3152 -704
WIRE -2416 -704 -3024 -704
WIRE -3456 -672 -3456 -752
WIRE -3328 -672 -3328 -752
WIRE -3088 -576 -3152 -576
WIRE -2384 -576 -2384 -800
WIRE -2384 -576 -3024 -576
WIRE 128 -560 -2096 -560
WIRE -3456 -496 -3456 -592
WIRE -3440 -496 -3456 -496
WIRE -3328 -496 -3328 -608
WIRE -3328 -496 -3440 -496
WIRE -3152 -496 -3152 -576
WIRE -3152 -496 -3328 -496
WIRE 128 -496 128 -560
WIRE -3440 -480 -3440 -496
WIRE -3152 -480 -3152 -496
WIRE -3088 -480 -3152 -480
WIRE -2416 -480 -2416 -704
WIRE -2416 -480 -3024 -480
WIRE -1616 -480 -2032 -480
WIRE -1040 -480 -1616 -480
WIRE -928 -480 -1040 -480
WIRE 896 -448 752 -448
WIRE -1040 -432 -1040 -480
WIRE 896 -432 896 -448
WIRE 128 -384 128 -416
WIRE 128 -384 16 -384
WIRE 752 -352 752 -448
WIRE 896 -352 800 -352
WIRE 896 -320 896 -352
WIRE 736 -304 672 -304
WIRE 864 -304 816 -304
WIRE -2800 -288 -3088 -288
WIRE -2688 -288 -2800 -288
WIRE -2464 -288 -2608 -288
WIRE -2384 -288 -2384 -576
WIRE -2384 -288 -2464 -288
WIRE -2256 -288 -2384 -288
WIRE -1120 -288 -2256 -288
WIRE -544 -288 -1120 -288
WIRE 672 -288 672 -304
WIRE 672 -288 -544 -288
WIRE -2256 -256 -2256 -288
WIRE -3088 -240 -3088 -288
WIRE 16 -240 16 -384
WIRE -2800 -224 -2800 -288
WIRE 672 -224 672 -288
WIRE -928 -208 -928 -480
WIRE 128 -192 128 -384
WIRE -1040 -160 -1040 -352
WIRE -992 -160 -1040 -160
WIRE -2256 -144 -2256 -192
WIRE -2256 -144 -2352 -144
WIRE 16 -144 16 -160
WIRE 64 -144 16 -144
WIRE -3088 -128 -3088 -160
WIRE -3088 -128 -3200 -128
WIRE -3200 -80 -3200 -128
WIRE -3088 -80 -3088 -128
WIRE -2352 -80 -2352 -144
WIRE -1104 -80 -1424 -80
WIRE 480 -80 -1104 -80
WIRE 672 -80 672 -144
WIRE 672 -80 480 -80
WIRE 736 -80 672 -80
WIRE -928 -16 -928 -112
WIRE 128 0 128 -96
WIRE -3088 16 -3088 0
WIRE -2800 16 -2800 -144
WIRE -2800 16 -3088 16
WIRE -2656 16 -2800 16
WIRE -2352 48 -2352 -16
WIRE -2032 48 -2032 -480
WIRE -2032 48 -2352 48
WIRE -544 64 -544 -288
WIRE -1264 80 -1328 80
WIRE -1040 80 -1040 -160
WIRE -1040 80 -1072 80
WIRE -928 80 -928 64
WIRE -784 80 -928 80
WIRE -720 80 -784 80
WIRE -704 80 -720 80
WIRE -608 80 -704 80
WIRE 480 80 480 -80
WIRE -2352 96 -2352 48
WIRE -784 96 -784 80
WIRE -256 96 -352 96
WIRE 16 96 16 -144
WIRE 16 96 -64 96
WIRE 128 96 128 80
WIRE 240 96 128 96
WIRE 288 96 240 96
WIRE 368 96 288 96
WIRE 416 96 368 96
WIRE 240 112 240 96
WIRE -608 144 -608 80
WIRE -592 144 -608 144
WIRE 416 160 416 96
WIRE 432 160 416 160
WIRE -1264 176 -1280 176
WIRE -976 176 -1072 176
WIRE -784 176 -784 160
WIRE -784 176 -976 176
WIRE -704 176 -704 160
WIRE -704 176 -784 176
WIRE -544 176 -544 160
WIRE -544 176 -704 176
WIRE -544 192 -544 176
WIRE -256 192 -272 192
WIRE 48 192 -64 192
WIRE 240 192 240 176
WIRE 240 192 48 192
WIRE 288 192 288 176
WIRE 288 192 240 192
WIRE 480 192 480 176
WIRE 480 192 288 192
WIRE -608 208 -608 144
WIRE -592 208 -608 208
WIRE 480 208 480 192
WIRE -1328 224 -1328 80
WIRE 416 224 416 160
WIRE 432 224 416 224
WIRE -352 240 -352 96
WIRE -1280 304 -1280 176
WIRE -1280 304 -1328 304
WIRE -288 320 -352 320
WIRE -272 320 -272 192
WIRE -272 320 -288 320
WIRE -1328 368 -1328 304
WIRE -288 368 -288 320
WIRE -544 384 -544 288
WIRE 480 384 480 304
WIRE -2656 592 -2656 16
WIRE -2416 592 -2416 -480
WIRE -2416 592 -2656 592
WIRE -2352 592 -2352 160
WIRE -2352 592 -2416 592
WIRE -2304 592 -2352 592
WIRE -1424 592 -1424 -80
WIRE -1424 592 -2304 592
WIRE -544 592 -544 464
WIRE 480 592 480 464
WIRE 480 592 -544 592
WIRE -2464 656 -2464 -288
WIRE -2256 704 -2256 -144
WIRE -1296 704 -2256 704
WIRE -976 704 -976 176
WIRE -976 704 -1296 704
WIRE -3056 784 -3264 784
WIRE -3056 800 -3056 784
WIRE -2928 800 -3056 800
WIRE -2672 800 -2848 800
WIRE -2464 800 -2464 720
WIRE -2096 800 -2096 -560
WIRE -2096 800 -2464 800
WIRE -3264 832 -3264 784
WIRE -2672 832 -2672 800
WIRE -2464 832 -2464 800
WIRE -2304 880 -2304 592
WIRE -3072 1008 -3280 1008
WIRE -3072 1024 -3072 1008
WIRE -2944 1024 -3072 1024
WIRE -2688 1024 -2864 1024
WIRE -3280 1056 -3280 1008
WIRE -2688 1056 -2688 1024
WIRE -2464 1072 -2464 896
WIRE -2304 1072 -2304 944
WIRE -2304 1072 -2464 1072
WIRE -336 1072 -2304 1072
WIRE 48 1072 48 192
WIRE 48 1072 -336 1072
WIRE -544 1248 -544 592
WIRE -544 1376 -544 1328
WIRE 864 1376 864 -304
WIRE 864 1376 -544 1376
FLAG 896 -320 0
FLAG -1616 -480 N-BootstrapV
FLAG -2096 800 S-BootstrapV
FLAG -1120 -288 N-Rail
FLAG -1104 -80 S-Rail
FLAG -288 368 0
FLAG -1328 368 0
FLAG -2672 896 0
FLAG -3264 912 0
FLAG -2688 1120 0
FLAG -3280 1136 0
FLAG -1296 704 N-Rail_Ref
FLAG -336 1072 S-Rail_Ref
FLAG 368 96 S-Rail_Gate
FLAG -720 80 N-Rail_Gate
FLAG -3200 -80 0
FLAG -3440 -480 0
SYMBOL nmos -592 64 R0
SYMATTR InstName M1
SYMATTR Value Si7850DP
SYMBOL nmos 432 80 R0
SYMATTR InstName M2
SYMATTR Value Si7850DP
SYMBOL nmos -592 288 M180
SYMATTR InstName M3
SYMATTR Value Si7850DP
SYMBOL nmos 432 304 M180
SYMATTR InstName M4
SYMATTR Value Si7850DP
SYMBOL voltage -2800 -240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(-24 24 0 1u 1u 58u 116u)
SYMBOL res 656 -240 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL voltage 896 -448 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value PULSE(-1 1 1m 1u 1u 10 20)
SYMBOL sw 832 -304 R90
SYMATTR InstName S2
SYMBOL res -2592 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1m
SYMBOL res 272 80 R0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL zener 256 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -12 -35 Left 2
SYMATTR InstName D11
SYMATTR Value BZX84C15L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL current -352 320 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value PULSE(0m 10m 5.1m 10n 10n 4.9m 10m)
SYMBOL voltage 128 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL Optos\\PC817A -160 144 R0
SYMATTR InstName U1
SYMBOL res -560 1232 R0
SYMATTR InstName R28
SYMATTR Value 1m
SYMBOL Optos\\PC817A -1168 128 R0
SYMATTR InstName U2
SYMBOL voltage -544 368 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage 480 368 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 0
SYMBOL cap -2480 832 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL diode -2480 656 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap -2368 -80 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL diode -2336 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL voltage -3264 816 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=60m
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.2 0 10n 10n 30u 100u)
SYMBOL res -2832 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL cap -2688 832 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL voltage -3280 1040 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=60m
SYMATTR InstName V7
SYMATTR Value PULSE(0 3.2 0 10n 10n 70u 100u)
SYMBOL res -2848 1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL cap -2704 1056 R0
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL res -944 -32 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL current -1328 304 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value PULSE(0m 10m 100u 10n 10n 4.9m 10m)
SYMBOL zener -768 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -12 -35 Left 2
SYMATTR InstName D6
SYMATTR Value BZX84C15L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -720 64 R0
SYMATTR InstName R9
SYMATTR Value 20k
SYMBOL diode -2240 -192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode -2288 944 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL pnp -992 -112 M180
SYMATTR InstName Q2
SYMATTR Value 2N2907
SYMBOL res -1056 -448 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 112 -16 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL pnp 64 -96 M180
SYMATTR InstName Q1
SYMATTR Value 2N2907
SYMBOL res 0 -256 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res -3104 -256 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -3104 -96 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL diode -3088 -560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -3088 -464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL cap -3344 -672 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res -3472 -688 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL diode -3024 -720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -3024 -816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMATTR Value 1N4148
TEXT -2312 -416 Left 2 !.tran 500m startup
TEXT 552 -336 Left 2 !.model SW SW()
TEXT -1936 -488 Left 2 ;1/2 Watt
TEXT -1896 -64 Left 2 ;1/2 Watt
